# wrangler.toml
# Cloudflare Workers configuration for Notes API

name = "notes-api"
main = "src/worker.ts"
compatibility_date = "2024-12-01"
compatibility_flags = ["nodejs_compat"]

# Environment variables (set via wrangler secret)
# ANTHROPIC_API_KEY - your Anthropic API key

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "notes-db"
database_id = "312f802a-da7c-4408-8a2a-0513afa06ecf"

# KV Namespace for Claude's memories
[[kv_namespaces]]
binding = "MEMORIES"
id = "1d106b1f44264857b30441408c1ff0aa"

# Queue for async memory processing (requires paid plan)
# Uncomment when upgrading to Workers Paid plan
# [[queues.producers]]
# binding = "MEMORY_QUEUE"
# queue = "notes-memory-processing"

# [[queues.consumers]]
# queue = "notes-memory-processing"
# max_batch_size = 1
# max_retries = 3
# dead_letter_queue = "notes-memory-dlq"

# [[queues.producers]]
# binding = "MEMORY_DLQ"
# queue = "notes-memory-dlq"
